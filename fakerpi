#!/usr/bin/env python
# -*- mode: python -*-

import sys
from application import PagerPI

class Shutdown(BaseException):
    pass

class StdinPager(object):
    is_open = True

    def readline(self):
        try:
            return raw_input("pager line: ")
        except (EOFError, KeyboardInterrupt):
            raise Shutdown()

    def close(self):
        pass


def main():
    pagerpi = PagerPI(pager=StdinPager())
    if "--local" in sys.argv:
        pagerpi.default_config['pager_log_host'] = 'http://localhost:8080/'
    pagerpi.debug = True
    pagerpi.verbose = True
    pagerpi.send_addresses = lambda: None
    try:
        pagerpi.main()
    except Shutdown:
        print


if __name__ == '__main__':
    main()
